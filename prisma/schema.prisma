// prisma/schema.prisma
generator client {
  provider = "prisma-client-js"
}
/*
datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
} 
*/

datasource db {
  provider = "postgresql"
  url      = env("PRISMA_DATABASE_URL2_DATABASE_URL")
}


// âœ… Step 1: Prisma Schema (prisma/schema.prisma)
// Run: npx prisma migrate dev --name init

model User {
  id             Int      @id @default(autoincrement())
  name           String
  username       String   @unique
  email          String?
  password       String
  employeeNumber String   @unique
  role           Role     @default(CLIENT)
  firstLogin     Boolean  @default(true)
  createdAt      DateTime @default(now())
  idCards        IdCard[] // <-- Add this line
}

model Submission {
  id             Int      @id @default(autoincrement())
  employeeName   String
  employeeNumber String   @unique
  employerName   String
  dues           String
  witness        String
  pdfPath        String
  submittedAt    DateTime @default(now())
}

enum Role {
  CLIENT
  ADMIN
  SUPERADMIN
}

model IdCard {
  id            Int      @id @default(autoincrement())
  user          User     @relation(fields: [userId], references: [id])
  userId        Int
  fullName      String
  rawPhotoUrl   String?  // original upload (untouched)
  cleanPhotoUrl String?  // cleaned by rembg
  company       String
  role          String
  issuedAt      DateTime @default(now())
  cardNumber    String   @unique
}

